<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Typing Master by Rehman ‚Äî Professional Typing Test & Certificate</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- PRELOAD FONTS (IMPORTANT FOR CERTIFICATE QUALITY) -->
  <link rel="preload"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700;800&family=Great+Vibes&display=swap"
    as="style">

  <!-- GOOGLE FONTS (NORMAL LOAD) -->
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700;800&family=Great+Vibes&display=swap"
    rel="stylesheet">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="course.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- html2canvas + jsPDF -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

  <!-- CUSTOM STYLES -->
  <style>
    /* ==== Certificate Font Enforcement ==== */
    .cert-container,
    .cert-container * {
      font-family: 'Inter', sans-serif !important;
    }

    .cert-title {
      font-family: 'Playfair Display', serif !important;
    }

    .cert-signature {
      font-family: 'Great Vibes', cursive !important;
    }

    .modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.45);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      backdrop-filter: blur(4px);
    }

    .modal.show {
      display: flex;
    }

    .preview-scale {
      transform-origin: top left;
    }

    .glass {
      background: rgba(255, 255, 255, 0.65);
      backdrop-filter: blur(8px);
    }

    .gradient-text {
      background: linear-gradient(to right, #6366f1, #a855f7, #ec4899);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    /* Certificate-specific improvements */
    .cert-id-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 10px;

      padding: 10px 28px;
      height: 44px;
      line-height: 1;

      background: linear-gradient(135deg, #2C3E50, #1A252F);
      border-radius: 999px;
      color: #fff;
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.15), inset 0 1px 2px rgba(255, 255, 255, 0.12);
      margin-top: 20px;
      align-self: center;
      position: relative;
      z-index: 20;
    }

    .cert-id-label {
      font-size: 11px;
      color: #E8C87C;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .cert-id-value {
      font-size: 13px;
      font-family: monospace;
      font-weight: 700;
    }

    .cert-divider-elegant {
      height: 1px;
      background: linear-gradient(90deg, transparent, #daa520, transparent);
      margin: 26px 0;
      position: relative;
      z-index: 8;
    }

    .cert-divider-diamond {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%) rotate(45deg);
      width: 14px;
      height: 14px;
      background: linear-gradient(135deg, #f6d58a, #daa520);
      border-radius: 2px;
      box-shadow: 0 4px 10px rgba(218, 165, 32, 0.12);
      z-index: 9;
      pointer-events: none;
    }

    .cert-footer {
      position: absolute;
      left: 80px;
      right: 80px;
      bottom: 48px;
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: end;
      gap: 40px;
      z-index: 12;
    }

    .cert-footer-left,
    .cert-footer-right {
      font-size: 11px;
      line-height: 1.6;
      color: #5D6D7E;
    }

    .cert-footer-verify {
      color: #5D6D7E;
      margin: 0 0 4px;
      font-weight: 600;
      text-transform: uppercase;
      font-size: 9px;
      letter-spacing: 0.08em;
    }

    .cert-footer-url {
      color: #2C3E50;
      font-weight: 700;
      font-size: 12px;
      text-decoration: none;
    }

    .cert-footer-id {
      color: #5D6D7E;
      font-size: 10px;
      margin: 0;
    }

    /* SaaS Dashboard Styles */
    .glass {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .card-hover {
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .card-hover:hover {
      transform: translateY(-10px);
      box-shadow: 0 25px 50px -12px rgba(99, 102, 241, 0.25);
      border-color: rgba(99, 102, 241, 0.4);
    }

    .animate-pop {
      animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes pop {
      0% {
        transform: scale(0.95);
        opacity: 0;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    /* Keyboard Tutor Styles */
    .keyboard-tutor {
      display: grid;
      grid-template-rows: repeat(5, 1fr);
      gap: 4px;
      background: #f1f5f9;
      padding: 10px;
      border-radius: 12px;
      max-width: 600px;
      margin: 20px auto 0;
      border: 2px solid #e2e8f0;
    }

    .key-row {
      display: flex;
      gap: 4px;
      justify-content: center;
    }

    .tutor-key {
      width: 38px;
      height: 38px;
      background: linear-gradient(180deg, #ffffff 0%, #f1f5f9 100%);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 800;
      color: #475569;
      border: 1px solid #e2e8f0;
      transition: all 0.2s;
      box-shadow: 0 4px 0 #e2e8f0, 0 8px 15px rgba(0, 0, 0, 0.05);
    }

    .tutor-key.active-key {
      background: #6366f1;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(99, 102, 241, 0.4);
      border-color: #4f46e5;
    }

    /* Realistic Image-Based Hands Overlay */
    #keyboard-tutor {
      position: relative;
      max-width: 650px;
      margin: 20px auto 0;
    }

    #hands-container {
      position: absolute;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100%;
      max-width: 600px;
      height: 100%;
      pointer-events: none;
      z-index: 10;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding-top: 10px;
    }

    .hands-image {
      width: 100%;
      height: auto;
      opacity: 0.85;
      filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.15));
      transition: opacity 0.3s ease;
    }

    /* Finger highlight overlay - positioned absolutely over specific fingers */
    .finger-highlight {
      position: absolute;
      width: 30px;
      height: 60px;
      background: radial-gradient(circle, rgba(99, 102, 241, 0.4) 0%, transparent 70%);
      border-radius: 50%;
      opacity: 0;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    .finger-highlight.active {
      opacity: 1;
      animation: pulse 0.6s ease-in-out infinite;
    }

    @keyframes pulse {

      0%,
      100% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.1);
      }
    }

    .nail {
      fill: rgba(255, 255, 255, 0.4);
    }

    /* safety for capture */
    #certCanvas,
    #certCanvas * {
      -webkit-font-smoothing: antialiased;
      box-sizing: border-box;
    }

    /* Settings Lock Styles */
    select:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      background-color: #f8fafc;
      border-color: #e2e8f0 !important;
    }

    .settings-locked-active {
      color: #ef4444;
      animation: pulse-red 2s infinite;
    }

    @keyframes pulse-red {

      0%,
      100% {
        opacity: 1;
      }

      50% {
        opacity: 0.5;
      }
    }

    /* --- Interactive Command Center Premium Styles --- */
    .learn-container {
      display: flex;
      gap: 24px;
      margin-top: 30px;
      min-height: 600px;
      align-items: flex-start;
    }

    /* Glassy Sidebar */
    .learn-sidebar {
      width: 260px;
      flex-shrink: 0;
      background: rgba(255, 255, 255, 0.4);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.5);
      border-radius: 24px;
      padding: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      height: fit-content;
      position: sticky;
      top: 20px;
      z-index: 10;
    }

    .course-nav-btn {
      width: 100%;
      padding: 14px 20px;
      border-radius: 16px;
      text-align: left;
      font-weight: 700;
      font-size: 0.9rem;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      color: #64748b;
      display: flex;
      align-items: center;
      gap: 12px;
      border: 1px solid transparent;
      background: transparent;
    }

    .course-nav-btn:hover {
      background: rgba(255, 255, 255, 0.6);
      color: #4f46e5;
      transform: translateX(4px);
    }

    .course-nav-btn.active {
      background: white;
      color: #6366f1;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.1);
      border-color: rgba(99, 102, 241, 0.2);
    }

    /* Main Dashboard */
    .learn-dashboard {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 24px;
    }

    /* Hero "Next Mission" Card */
    .learn-hero-card {
      background: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
      color: white;
      padding: 32px;
      border-radius: 28px;
      position: relative;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(99, 102, 241, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 32px;
    }

    .hero-content {
      flex: 1;
      z-index: 2;
    }

    .hero-heatmap-wrap {
      flex-shrink: 0;
      z-index: 2;
      background: rgba(0, 0, 0, 0.15);
      padding: 20px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .learn-hero-card::after {
      content: '';
      position: absolute;
      top: -50px;
      right: -50px;
      width: 250px;
      height: 250px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 50%;
    }

    /* Tactical Learning Arena */
    #tab-learn-arena {
      background: #0f172a;
      color: white;
      height: calc(100vh - 80px);
      /* Fixed height to prevent scrolling */
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-evenly;
      /* Evenly distribute elements vertically */
      padding: 20px;
      position: relative;
      overflow: hidden;
    }

    #tab-learn-arena::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 50% 50%, rgba(99, 102, 241, 0.05) 0%, transparent 70%);
      pointer-events: none;
    }

    .training-header {
      text-align: center;
      margin-bottom: 20px;
      /* Reduced from 60px */
      z-index: 2;
    }

    .training-mission-title {
      font-size: 10px;
      font-weight: 900;
      color: #818cf8;
      text-transform: uppercase;
      letter-spacing: 0.2em;
      margin-bottom: 8px;
      display: block;
    }

    /* Spotlight Typing Area */
    .spotlight-container {
      width: 100%;
      max-width: 900px;
      height: 120px;
      /* Slightly reduced height */
      display: flex;
      align-items: center;
      justify-content: flex-start;
      /* Start from left for sliding math */
      position: relative;
      z-index: 2;
      margin-bottom: 40px;
      /* Reduced from 80px */
      overflow: hidden;
      mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
    }

    #training-text {
      font-size: 56px;
      font-weight: 800;
      white-space: nowrap;
      display: flex;
      gap: 0;
      /* Remove gap for exact math */
      transition: transform 0.3s cubic-bezier(0.19, 1, 0.22, 1);
    }

    .spot-ch {
      color: rgba(255, 255, 255, 0.1);
      transition: all 0.2s;
      position: relative;
      flex: 0 0 60px;
      /* Enforced fixed width */
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .spot-ch.current {
      color: #fff;
      text-shadow: 0 0 20px rgba(99, 102, 241, 0.8), 0 0 40px rgba(99, 102, 241, 0.4);
      transform: scale(1.1);
    }

    .spot-ch.correct {
      color: #818cf8;
    }

    .spot-ch.wrong {
      color: #ef4444;
      text-shadow: 0 0 15px rgba(239, 68, 68, 0.5);
    }

    /* Distance-based Opacity */
    .spot-ch.near {
      color: rgba(255, 255, 255, 0.4);
    }

    .spot-ch.far {
      color: rgba(255, 255, 255, 0.05);
    }

    /* Mastery HUD */
    .mastery-hud {
      position: absolute;
      top: 40px;
      right: 40px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      z-index: 3;
    }

    .hud-card {
      background: rgba(30, 41, 59, 0.6);
      backdrop-filter: blur(10px);
      padding: 16px;
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      min-width: 120px;
    }

    .hud-label {
      font-size: 9px;
      font-weight: 900;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 4px;
    }

    .hud-value {
      font-size: 24px;
      font-weight: 900;
      color: #fff;
    }

    /* Finger Guidance Keyboard */
    .finger-guide-container {
      margin-top: 0;
      /* Let space-evenly handle it */
      width: 100%;
      max-width: 850px;
      /* Increased from 700px */
      background: rgba(30, 41, 59, 0.4);
      padding: 20px;
      /* Reduced padding */
      border-radius: 32px;
      border: 1px solid rgba(255, 255, 255, 0.05);
      z-index: 2;
    }

    .virtual-kb {
      display: flex;
      flex-direction: column;
      gap: 6px;
      /* Increased for horizontal breathing room */
    }

    .vk-row {
      display: flex;
      justify-content: center;
      gap: 6px;
      /* Increased for horizontal breathing room */
    }

    .vk-key {
      width: 42px;
      /* Increased from 34px */
      /* Reduced from 40px */
      height: 34px;
      /* Reduced from 40px */
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      /* Smaller font */
      font-weight: 700;
      color: rgba(255, 255, 255, 0.2);
      transition: all 0.2s;
    }

    .vk-key.target {
      background: rgba(99, 102, 241, 0.4);
      border-color: #818cf8;
      color: #fff;
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.4);
      transform: translateY(-4px);
    }

    .vk-key.space {
      width: 200px;
    }

    /* Finger Zones Colors */
    .f-pinky {
      border-bottom: 2px solid #ec4899;
    }

    .f-ring {
      border-bottom: 2px solid #a855f7;
    }

    .f-middle {
      border-bottom: 2px solid #6366f1;
    }

    .f-index {
      border-bottom: 2px solid #3b82f6;
    }

    .f-thumb {
      border-bottom: 2px solid #14b8a6;
    }

    .vk-key.finger-active {
      background: rgba(255, 255, 255, 0.08);
      animation: pulse-guidance 1.5s infinite;
    }

    @keyframes pulse-guidance {
      0% {
        box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4);
      }

      70% {
        box-shadow: 0 0 0 10px rgba(99, 102, 241, 0);
      }

      100% {
        box-shadow: 0 0 0 0 rgba(99, 102, 241, 0);
      }
    }

    @keyframes hint-pulse {

      0%,
      100% {
        transform: scale(1);
        text-shadow: 0 0 20px rgba(99, 102, 241, 0.8);
      }

      50% {
        transform: scale(1.15);
        text-shadow: 0 0 40px rgba(255, 255, 255, 1), 0 0 60px rgba(99, 102, 241, 0.8);
      }
    }

    .is-hinting {
      animation: hint-pulse 1s infinite cubic-bezier(0.19, 1, 0.22, 1);
      color: #fff !important;
      z-index: 10;
    }

    /* Header Navigation Tabs */
    .tab-btn {
      transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .tab-btn.active {
      background: #6366f1;
      color: white !important;
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);
    }

    .tab-btn.active span {
      filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.5));
    }

    #tabs {
      background: rgba(248, 250, 252, 0.8);
      padding: 4px;
      border: 1px solid rgba(226, 232, 240, 0.6);
    }

    /* Native Ads / Sponsored Content */
    .sponsor-card {
      position: relative;
      border: 2px solid rgba(251, 191, 36, 0.1) !important;
      overflow: hidden;
    }

    .sponsor-card::before {
      content: 'SPONSORED';
      position: absolute;
      top: 12px;
      right: 12px;
      font-size: 8px;
      font-weight: 900;
      color: #92400e;
      background: #fef3c7;
      padding: 2px 6px;
      border-radius: 4px;
      letter-spacing: 0.05em;
      z-index: 10;
    }

    .sponsor-shadow {
      position: absolute;
      bottom: -20px;
      right: -20px;
      font-size: 80px;
      opacity: 0.03;
      transform: rotate(-15deg);
      pointer-events: none;
    }

    /* Practice Header Metrics (Pill Style) */
    .header-metrics {
      display: flex;
      gap: 8px;
    }

    .metric-pill {
      background: rgba(255, 255, 255, 0.5);
      border: 1px solid rgba(226, 232, 240, 0.8);
      padding: 8px 16px;
      border-radius: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-width: 100px;
      height: 50px;
      /* Matching selector height */
    }

    .metric-pill-label {
      font-size: 7px;
      font-weight: 900;
      color: #94a3b8;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 2px;
      line-height: 1;
    }

    .metric-pill-value {
      font-size: 18px;
      font-weight: 900;
      color: #1e293b;
      line-height: 1;
    }

    .metric-pill.m-wpm .metric-pill-value {
      color: #6366f1;
    }

    .metric-pill.m-acc .metric-pill-value {
      color: #10b981;
    }

    .metric-pill.m-cpm .metric-pill-value {
      color: #a855f7;
    }

    /* Industrial Arena HUD (System Status Bar) */
    /* Dedicated Arena Metrics Bar (External) */
    .arena-metrics-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #ffffff;
      border: 1px solid #f1f5f9;
      border-radius: 12px;
      padding: 0.5rem 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
      max-width: 540px;
      margin-inline: auto;
    }

    .arena-metric-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1px;
      padding: 0 0.75rem;
      position: relative;
      flex: 1;
    }

    .arena-metric-item:not(:last-child)::after {
      content: '';
      position: absolute;
      right: 0;
      top: 20%;
      height: 60%;
      width: 1px;
      background: #f1f5f9;
    }

    .metric-label {
      font-size: 7.5px;
      font-weight: 700;
      color: #94a3b8;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 2px;
      white-space: nowrap;
    }

    .metric-value {
      font-size: 18px;
      font-weight: 900;
      color: #1e293b;
      font-family: 'JetBrains Mono', monospace;
      letter-spacing: -0.02em;
      line-height: 1;
    }

    .metric-accent {
      width: 8px;
      height: 2px;
      border-radius: 10px;
      margin-top: 4px;
    }

    .acc-wpm {
      background: #6366f1;
    }

    .acc-acc {
      background: #10b981;
    }

    .acc-cpm {
      background: #a855f7;
    }

    .acc-time {
      background: #f59e0b;
    }

    .acc-acc {
      background: #10b981;
    }

    .acc-cpm {
      background: #a855f7;
    }

    .hud-wpm .hud-status-dot {
      background: #6366f1;
    }

    .hud-acc .hud-status-dot {
      background: #10b981;
    }

    .hud-cpm .hud-status-dot {
      background: #a855f7;
    }

    .typing-meter-container {
      position: fixed;
      bottom: 40px;
      right: 40px;
      width: 100px;
      height: 100px;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 50%;
      border: 2px solid rgba(255, 255, 255, 0.2);
    }

    .hero-tag {
      display: inline-block;
      padding: 4px 12px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 100px;
      font-size: 10px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 12px;
    }

    /* Bento Grid */
    .bento-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap: 16px;
    }

    .bento-card {
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.8);
      border-radius: 22px;
      padding: 24px;
      transition: all 0.3s;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
    }

    .bento-card:hover {
      background: white;
      transform: translateY(-5px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.05);
      border-color: #6366f1;
    }

    .bento-card.locked {
      opacity: 0.6;
      cursor: not-allowed;
      filter: grayscale(0.8);
    }

    .bento-card.completed {
      border-color: #22c55e;
      background: rgba(34, 197, 94, 0.05);
    }

    .bento-card.active {
      border: 2px solid #6366f1;
      box-shadow: 0 0 15px rgba(99, 102, 241, 0.2);
    }

    /* Tactical Heatmap Visual (Inside Hero) */
    .heatmap-row {
      display: flex;
      justify-content: center;
      gap: 4px;
      margin-bottom: 4px;
    }

    .heatmap-key {
      width: 26px;
      height: 26px;
      border-radius: 6px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 9px;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.5);
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    /* Hero Heatmap Levels */
    .level-0 {
      background: rgba(255, 255, 255, 0.05);
    }

    .level-1 {
      background: rgba(165, 180, 252, 0.2);
      color: #c7d2fe;
      border-color: rgba(165, 180, 252, 0.3);
    }

    .level-2 {
      background: rgba(129, 140, 248, 0.4);
      color: white;
      border-color: rgba(129, 140, 248, 0.5);
    }

    .level-3 {
      background: rgba(99, 102, 241, 0.7);
      color: white;
      border-color: rgba(255, 255, 255, 0.4);
      box-shadow: 0 0 10px rgba(99, 102, 241, 0.3);
    }

    .level-4 {
      background: #fff;
      color: #4f46e5;
      border-color: #fff;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
    }

    /* Heatmap Visual */
    .mastery-heatmap {
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      padding: 24px;
      border: 1px solid rgba(255, 255, 255, 0.8);
    }

    @media (max-width: 1024px) {
      .learn-hero-card {
        flex-direction: column;
        align-items: flex-start;
      }

      .hero-heatmap-wrap {
        align-self: center;
        width: 100%;
        max-width: 400px;
      }
    }

    @media (max-width: 768px) {
      header {
        flex-direction: column;
        gap: 1rem;
        padding: 1rem !important;
      }

      #tabs {
        width: 100%;
        overflow-x: auto;
        justify-content: flex-start;
        padding: 4px;
        -webkit-overflow-scrolling: touch;
      }

      .tab-btn {
        flex-shrink: 0;
        white-space: nowrap;
      }

      .arena-container {
        padding: 10px !important;
      }

      .arena-header {
        flex-direction: column;
        gap: 10px;
        align-items: flex-start !important;
      }

      .virtual-kb {
        display: none !important;
        /* Hide keyboard on small mobiles to save space */
      }

      .stats-grid,
      .grid-cols-4 {
        grid-template-cols: 1fr 1fr !important;
      }

      .glass {
        padding: 1rem !important;
      }

      h2 {
        font-size: 1.5rem !important;
      }
    }

    @media (max-width: 900px) {
      .learn-container {
        flex-direction: column;
      }

      .learn-sidebar {
        width: 100%;
        position: static;
        flex-direction: row;
        overflow-x: auto;
        padding: 8px;
        background: white;
        z-index: 50;
      }

      .course-nav-btn {
        white-space: nowrap;
        width: auto;
      }

      #course-dashboard {
        padding: 10px !important;
      }
    }
  </style>
  <link rel="stylesheet" href="style.css">
</head>

<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 transition-colors duration-500">
  <!-- Background Animation Layer -->
  <div id="bg-animation" class="fixed inset-0 pointer-events-none z-0 opacity-20 overflow-hidden"></div>

  <div id="app" class="min-h-screen relative z-10">
    <!-- =============== UNIFIED HEADER =============== -->
    <header class="bg-white px-8 py-4 flex items-center justify-between border-b border-gray-100">
      <!-- Logo & Title -->
      <div class="flex items-center gap-3">
        <div
          class="w-11 h-11 rounded-xl bg-gradient-to-br from-[#6366f1] to-[#4f46e5] text-white flex items-center justify-center shadow-sm">
          <svg class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="10" rx="2" />
            <path d="M7 15h.01M12 15h.01M17 15h.01M7 18h.01M12 18h.01M17 18h.01" />
          </svg>
        </div>
        <div>
          <h1 class="text-2xl font-bold text-gray-900 leading-none">Typing Master</h1>
          <p class="text-[9px] font-semibold text-gray-400">by Rehman</p>
        </div>
      </div>

      <!-- Main Navigation (Consolidated) -->
      <div id="tabs" class="flex items-center gap-4 bg-gray-50/50 p-1 rounded-2xl border border-gray-100">
        <button data-tab="home"
          class="tab-btn active px-4 py-2 text-xs font-bold rounded-xl transition-all flex items-center gap-2">
          <span>üè†</span> Dashboard
        </button>
        <button data-tab="test"
          class="tab-btn px-4 py-2 text-xs font-bold text-gray-500 rounded-xl hover:bg-white hover:text-gray-900 transition-all flex items-center gap-2">
          <span>üéØ</span> Practice
        </button>
        <button data-tab="course"
          class="tab-btn px-4 py-2 text-xs font-bold text-gray-500 rounded-xl hover:bg-white hover:text-gray-900 transition-all flex items-center gap-2">
          <span>üìñ</span> Course
        </button>
        <button data-tab="stats"
          class="tab-btn px-4 py-2 text-xs font-bold text-gray-500 rounded-xl hover:bg-white hover:text-gray-900 transition-all flex items-center gap-2">
          <span>üìä</span> Stats
        </button>
        <button data-tab="settings"
          class="tab-btn px-4 py-2 text-xs font-bold text-gray-500 rounded-xl hover:bg-white hover:text-gray-900 transition-all flex items-center gap-2">
          <span>‚öôÔ∏è</span> Settings
        </button>
        <button data-tab="certificate"
          class="tab-btn px-4 py-2 text-xs font-bold text-gray-500 rounded-xl hover:bg-white hover:text-gray-900 transition-all flex items-center gap-2">
          <span>‚ú®</span> Get Certificate
        </button>
      </div>

      <!-- Right Section: XP + Profile + Actions -->
      <div class="flex items-center gap-6">
        <!-- XP Progress -->
        <div class="flex items-center gap-3">
          <span class="text-xs font-bold text-[#6366f1]">LV. <span id="user-level">1</span></span>
          <div class="flex flex-col items-end">
            <div class="w-40 h-3 bg-gray-100 rounded-full overflow-hidden border border-gray-200">
              <div id="xp-progress"
                class="h-full bg-gradient-to-r from-[#6366f1] to-[#8b5cf6] w-[5%] rounded-full shadow-sm transition-all duration-500">
              </div>
            </div>
            <span id="xp-text" class="text-[8px] font-bold text-gray-500 mt-0.5">1 XP</span>
          </div>
        </div>

        <!-- Profile & Actions -->
        <div class="flex items-center gap-3">
          <div id="auth-profiles" class="flex items-center gap-3">
            <div id="guest-info" class="flex items-center gap-3">
              <div class="w-9 h-9 rounded-full bg-orange-100 flex items-center justify-center text-xl">üòä</div>
              <span id="current-user" class="font-semibold text-gray-700 text-sm">Guest</span>
              <button id="change-user"
                class="px-5 py-1.5 rounded-lg border border-[#6366f1]/30 text-[#6366f1] font-semibold text-xs hover:bg-indigo-50 transition-all">Change</button>
            </div>
            <div id="user-info" class="hidden items-center gap-3">
              <div class="w-9 h-9 rounded-full bg-orange-100 flex items-center justify-center text-xl" id="avatar-user">
                üòä</div>
              <span id="user-display-name" class="font-semibold text-gray-700 text-sm">User</span>
              <button id="btn-logout"
                class="px-5 py-1.5 rounded-lg border border-gray-200 text-gray-600 font-semibold text-xs hover:bg-gray-50 transition-all">Logout</button>
            </div>
          </div>

          <!-- Recruiter Login (Relocated) -->
          <div class="h-6 w-px bg-gray-200"></div>
          <button id="btn-login"
            class="px-5 py-1.5 rounded-lg bg-[#6366f1] text-white text-xs font-semibold hover:bg-[#5046e5] transition-all shadow-sm">Recruiter</button>

          <!-- Settings Toggle -->
          <button id="settings-toggle"
            class="p-2 rounded-lg hover:bg-gray-100 transition-all text-gray-500 hover:text-gray-700">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            </svg>
          </button>
        </div>
      </div>
    </header>



    <!-- Settings Dropdown Modal (Hidden by default) -->
    <div id="settings-modal"
      class="hidden fixed inset-0 bg-black/20 backdrop-blur-sm z-50 flex items-start justify-end p-4">
      <div class="bg-white rounded-2xl shadow-2xl p-6 w-80 mt-16 mr-4 border border-gray-100">
        <div class="flex items-center justify-between mb-4">
          <h3 class="text-lg font-bold text-gray-900">Settings</h3>
          <button id="close-settings" class="p-1 hover:bg-gray-100 rounded-lg transition-all">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <!-- Theme Selector -->
        <div class="mb-4">
          <label class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block">Theme</label>
          <div class="grid grid-cols-4 gap-3">
            <button
              class="theme-dot w-full aspect-square rounded-xl bg-gradient-to-br from-[#6366f1] to-[#8b5cf6] border-2 border-white shadow-md hover:scale-105 transition-all ring-2 ring-indigo-200"
              data-theme="default" title="Default"></button>
            <button
              class="theme-dot w-full aspect-square rounded-xl bg-gradient-to-br from-slate-300 to-slate-400 border-2 border-white shadow-md hover:scale-105 transition-all"
              data-theme="nordic" title="Nordic"></button>
            <button
              class="theme-dot w-full aspect-square rounded-xl bg-gradient-to-br from-[#1e293b] to-[#0f172a] border-2 border-white shadow-md hover:scale-105 transition-all"
              data-theme="dracula" title="Dracula"></button>
            <button
              class="theme-dot w-full aspect-square rounded-xl bg-gradient-to-br from-[#064e3b] to-[#022c22] border-2 border-white shadow-md hover:scale-105 transition-all"
              data-theme="matrix" title="Matrix"></button>
          </div>
        </div>

        <!-- Focus Mode Toggle -->
        <div class="pt-4 border-t border-gray-100 mb-4">
          <label class="flex items-center justify-between cursor-pointer">
            <span class="text-sm font-semibold text-gray-700">Focus Mode</span>
            <input type="checkbox" id="focus-toggle" class="sr-only peer">
            <div
              class="relative w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600">
            </div>
          </label>
        </div>

        <!-- Sound Profile Selector -->
        <div class="pt-4 border-t border-gray-100">
          <label class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-2 block">Keyboard Sound
            Profile</label>
          <select id="sound-profile-select"
            class="w-full p-2.5 rounded-xl border border-gray-200 text-sm font-semibold text-gray-700 bg-gray-50 focus:ring-2 focus:ring-indigo-500 transition-all">
            <option value="off">Off (Silent)</option>
            <option value="linear">Linear (Smooth)</option>
            <option value="clicky">Clicky (Loud)</option>
            <option value="tactile">Tactile (Classic)</option>
          </select>
        </div>
      </div>
    </div>



    <!--============== -->
    <main class="w-full py-8">
      <!-- DASHBOARD TAB -->
      <section id="tab-home" class="tab-panel max-w-7xl mx-auto px-4">
        <!-- New Stats-Focused Dashboard (Software Look) -->
        <div class="space-y-8">
          <!-- Hero Practice Widget -->
          <div class="glass p-8 rounded-3xl border border-white shadow-lg mb-8">
            <div class="flex items-center justify-between mb-6">
              <div>
                <h2 class="text-2xl font-bold text-gray-900 mb-1">Quick Practice</h2>
                <p class="text-sm text-gray-500">Start typing immediately - no setup required</p>
              </div>
              <button id="hero-refresh-text"
                class="px-4 py-2 rounded-lg border border-gray-200 text-gray-600 text-sm font-semibold hover:bg-gray-50 transition-all flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                New Text
              </button>
            </div>

            <!-- Typing Area -->
            <div class="relative bg-gradient-to-br from-gray-50 to-white rounded-2xl p-6 border border-gray-100 mb-6">
              <!-- Sample Text Display -->
              <div id="hero-text-display" class="text-lg leading-relaxed font-mono text-gray-800 mb-4 select-none">
                <span class="text-gray-400">Click below to start typing...</span>
              </div>

              <!-- Input Field -->
              <input type="text" id="hero-typing-input" placeholder="Click here and start typing..."
                class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-indigo-500 focus:outline-none text-lg font-mono transition-all"
                autocomplete="off" spellcheck="false" />
            </div>

            <!-- Stats Bar -->
            <div class="grid grid-cols-4 gap-4">
              <div class="bg-white rounded-xl p-4 border border-gray-100">
                <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">WPM</div>
                <div id="hero-wpm" class="text-3xl font-black text-indigo-600">0</div>
              </div>
              <div class="bg-white rounded-xl p-4 border border-gray-100">
                <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">Accuracy</div>
                <div id="hero-accuracy" class="text-3xl font-black text-green-600">100%</div>
              </div>
              <div class="bg-white rounded-xl p-4 border border-gray-100">
                <div class="text-xs font-bold text-gray-500 uppercase tracking-wider mb-1">Progress</div>
                <div id="hero-progress" class="text-3xl font-black text-purple-600">0%</div>
              </div>
              <div class="bg-white rounded-xl p-4 border border-gray-100 flex items-center justify-center">
                <button onclick="TM_ENGINE.showTab('test')"
                  class="w-full px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-bold text-sm hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md">
                  Full Practice ‚Üí
                </button>
              </div>
            </div>
          </div>

          <!-- Compact Stats Overview -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="glass p-6 rounded-2xl border border-white/40 shadow-sm">
              <div class="flex items-center justify-between mb-3">
                <span class="text-xs font-black uppercase tracking-widest text-indigo-600">Daily Streak</span>
                <span class="text-2xl">üî•</span>
              </div>
              <div class="text-3xl font-black text-gray-800 mb-1" id="dash-streak">0 Days</div>
              <div class="text-xs text-gray-500">Keep it going!</div>
            </div>
            <div class="glass p-6 rounded-2xl border border-white/40 shadow-sm">
              <div class="flex items-center justify-between mb-3">
                <span class="text-xs font-black uppercase tracking-widest text-purple-600">Total XP</span>
                <span class="text-2xl">‚ú®</span>
              </div>
              <div class="text-3xl font-black text-gray-800 mb-1" id="dash-xp">0 XP</div>
              <div class="text-xs text-gray-500">Rank: <span id="dash-rank">Beginner</span></div>
            </div>
            <div class="glass p-6 rounded-2xl border border-white/40 shadow-sm">
              <div class="flex items-center justify-between mb-3">
                <span class="text-xs font-black uppercase tracking-widest text-amber-600">Best WPM</span>
                <span class="text-2xl">‚ö°</span>
              </div>
              <div class="text-3xl font-black text-gray-800 mb-1" id="dash-best-wpm">0</div>
              <div class="text-xs text-gray-500">Personal record</div>
            </div>
          </div>


          <!-- Activity Cards -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <div onclick="TM_ENGINE.showTab('test')"
              class="glass card-hover p-8 rounded-3xl border border-white/40 cursor-pointer text-center group">
              <div
                class="w-16 h-16 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center text-3xl mx-auto mb-6 group-hover:scale-110 transition duration-500">
                üìñ</div>
              <h3 class="text-xl font-bold text-gray-800 mb-2">Guided Learning</h3>
              <p class="text-gray-500 text-sm mb-6">15 levels of professional drills from home-row to symbols.</p>
              <div class="text-indigo-600 font-bold text-sm">Resume Course ‚Üí</div>
            </div>
            <div onclick="TM_ENGINE.showTab('test')"
              class="glass card-hover p-8 rounded-3xl border border-white/40 cursor-pointer text-center group">
              <div
                class="w-16 h-16 rounded-2xl bg-purple-100 text-purple-600 flex items-center justify-center text-3xl mx-auto mb-6 group-hover:scale-110 transition duration-500">
                üéØ</div>
              <h3 class="text-xl font-bold text-gray-800 mb-2">Free Practice</h3>
              <p class="text-gray-500 text-sm mb-6">Categorized passages for all skill levels. No limits.</p>
              <div class="text-purple-600 font-bold text-sm">Start Typing ‚Üí</div>
            </div>
            <div onclick="TM_ENGINE.showTab('certificate')"
              class="glass card-hover p-8 rounded-3xl border border-white/40 cursor-pointer text-center group">
              <div
                class="w-16 h-16 rounded-2xl bg-amber-100 text-amber-600 flex items-center justify-center text-3xl mx-auto mb-6 group-hover:scale-110 transition duration-500">
                üéñÔ∏è</div>
              <h3 class="text-xl font-bold text-gray-800 mb-2">Certification Exam</h3>
              <p class="text-gray-500 text-sm mb-6">Earn verified credentials. $5 single attempt or package.</p>
              <div class="text-amber-600 font-bold text-sm">Claim Status ‚Üí</div>
            </div>

            <!-- Dashboard Native Ad Slot (Sponsored) -->
            <div
              class="glass p-6 rounded-3xl border border-white/40 shadow-sm sponsor-card flex flex-col justify-between group cursor-pointer hover:border-amber-200 transition-all">
              <div class="relative z-10">
                <div
                  class="w-10 h-10 rounded-xl bg-amber-50 flex items-center justify-center text-xl mb-4 group-hover:scale-110 transition-transform">
                  üíª</div>
                <h3 class="text-lg font-bold text-gray-800 leading-tight mb-2">Full-Stack Bootcamp</h3>
                <p class="text-xs text-gray-500 font-medium">Master Next.js & AI. 20% off for Typing Master users.</p>
              </div>
              <div class="mt-4 flex items-center justify-between relative z-10">
                <span class="text-[10px] font-bold text-amber-600 bg-amber-50 px-2 py-1 rounded">PROMO AVAILABLE</span>
                <span class="text-indigo-600 text-xs font-bold group-hover:translate-x-1 transition-transform">Learn
                  More ‚Üí</span>
              </div>
              <div class="sponsor-shadow">üöÄ</div>
            </div>
          </div>

          <!-- Recent Activity & Leaderboard Snippet -->
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 animate-pop">
            <div class="glass p-8 rounded-3xl border border-white/40 shadow-sm relative overflow-hidden">
              <div
                class="absolute -right-4 -top-4 text-indigo-100/30 text-8xl font-black select-none pointer-events-none">
                ‚ú®
              </div>
              <div class="flex items-center justify-between mb-6 relative z-10">
                <h3 class="text-xl font-bold text-gray-800">Recent Achievements</h3>
                <span
                  class="text-[10px] font-black text-indigo-500 uppercase tracking-widest bg-indigo-50 px-3 py-1 rounded-full">Global
                  Live</span>
              </div>
              <div class="space-y-4 relative z-10" id="dash-recent-list">
                <div
                  class="flex items-center gap-4 p-3 rounded-2xl hover:bg-white/50 transition border border-transparent hover:border-white/60">
                  <div
                    class="w-10 h-10 rounded-full bg-amber-100 flex items-center justify-center text-xl shadow-inner text-amber-600">
                    ü•á</div>
                  <div>
                    <div class="text-sm font-bold text-gray-800">User_42 earned Gold Certificate</div>
                    <div class="text-[10px] text-gray-400 font-medium">2 minutes ago ‚Ä¢ 78 WPM</div>
                  </div>
                </div>
                <div
                  class="flex items-center gap-4 p-3 rounded-2xl hover:bg-white/50 transition border border-transparent hover:border-white/60">
                  <div
                    class="w-10 h-10 rounded-full bg-indigo-100 flex items-center justify-center text-xl shadow-inner text-indigo-600">
                    üöÄ</div>
                  <div>
                    <div class="text-sm font-bold text-gray-800">Master_Typist hit 10-day streak</div>
                    <div class="text-[10px] text-gray-400 font-medium">15 minutes ago ‚Ä¢ Consistency Expert</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Global Leaderboard (Full Width) -->
            <div
              class="col-span-1 lg:col-span-2 glass p-8 rounded-3xl border border-white/40 shadow-sm relative overflow-hidden">
              <div class="flex items-center justify-between mb-6 relative z-10">
                <div>
                  <h3 class="text-2xl font-bold text-gray-800">üèÜ Global Leaderboard</h3>
                  <p class="text-xs text-gray-500 font-medium">Real-time rankings from all active users</p>
                </div>
                <button id="btn-seed-data"
                  class="btn px-4 py-2 bg-white text-indigo-600 border-2 border-indigo-100 hover:border-indigo-600 hover:bg-indigo-600 hover:text-white transition-all duration-300 font-bold text-xs rounded-xl shadow-sm flex items-center gap-2">
                  <span>Seed Demo Data</span>
                  <span class="text-lg">üß™</span>
                </button>
              </div>
              <div id="board" class="mt-6 flex flex-col gap-4">
                <div class="text-center py-10">
                  <div class="flex justify-center gap-2 mb-4">
                    <div class="w-2 h-2 rounded-full bg-indigo-400 animate-bounce"></div>
                    <div class="w-2 h-2 rounded-full bg-indigo-400 animate-bounce [animation-delay:0.2s]"></div>
                    <div class="w-2 h-2 rounded-full bg-indigo-400 animate-bounce [animation-delay:0.4s]"></div>
                  </div>
                  <div class="text-gray-400 italic text-sm">Loading global ranks...</div>
                </div>
              </div>
            </div>

          </div>
      </section>

      <!-- COURSE TAB -->
      <section id="tab-course" class="tab-panel fade-in hidden">
        <div id="course-container">
          <!-- Content will be injected by course.js -->
          <div class="text-center py-20">
            <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"></div>
            <p class="text-gray-500">Loading your course modules...</p>
          </div>
        </div>
      </section>



      <!-- ========== Typing Test TAB ========== -->
      <section id="tab-test" class="tab-panel fade-in hidden max-w-7xl mx-auto px-4">
        <!-- Practice Sub-Navigation REMOVED -->

        <!-- Sub-Tab: Typing Test (Now Main Content) -->
        <div id="subtab-typing" class="w-full">
          <div class="glass rounded-2xl shadow-xl border p-8">
            <div class="test-header flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
              <div class="flex items-center gap-4">
                <h2 id="test-title" class="text-3xl font-bold gradient-text m-0">‚ö° Speed Typing</h2>
              </div>
              <div class="flex flex-col sm:flex-row items-stretch sm:items-end gap-4">

                <div class="flex flex-col">
                  <label class="text-[10px] text-gray-500 mb-2 block font-black uppercase tracking-widest">üìù Test
                    Mode</label>
                  <select id="mode" name="mode"
                    class="w-full sm:w-44 bg-white border-2 border-gray-200 rounded-xl px-4 py-3 h-[50px] font-bold">
                    <option value="words" selected>Words</option>
                    <option value="sentences">Sentences</option>
                    <option value="paragraphs">Paragraphs</option>
                    <option value="quotes">Famous Quotes</option>
                    <option value="weak">Weak Keys Training</option>
                    <option value="code">Code Injection Mode</option>
                  </select>
                </div>
                <div class="flex flex-col">
                  <label class="text-[10px] text-gray-500 mb-2 block font-black uppercase tracking-widest">‚è±Ô∏è
                    Duration</label>
                  <select id="duration" name="duration"
                    class="w-full sm:w-40 bg-white border-2 border-gray-200 rounded-xl px-4 py-3 h-[50px] font-bold">
                    <option value="30">30s</option>
                    <option value="60" selected>1m</option>
                    <option value="120">2m</option>
                    <option value="300">5m</option>
                    <option value="600">10m</option>
                  </select>
                </div>
                <div class="flex items-center gap-3 bg-white/50 p-1 rounded-xl border border-gray-100 h-[50px]">
                  <button id="btn-sound-toggle"
                    class="p-2.5 rounded-lg hover:bg-white transition shadow-sm border border-transparent hover:border-indigo-100"
                    title="Toggle Typing Sound">üîä</button>
                  <button id="btn-focus-toggle"
                    class="p-2.5 rounded-lg hover:bg-white transition shadow-sm border border-transparent hover:border-indigo-100"
                    title="Toggle Focus Mode">üëÅÔ∏è</button>
                  <p id="lock-note" class="hidden text-xs text-gray-500 font-medium ml-2">üîí Settings locked during test
                  </p>
                </div>
              </div>
            </div>

            <!-- Bot Progress / Track -->
            <div id="bot-track" class="hidden relative h-1.5 w-full bg-gray-100 rounded-full mb-2 overflow-hidden">
              <div id="bot-progress" class="absolute h-full bg-indigo-300 w-0 transition-all duration-1000"></div>
              <div id="user-dot"
                class="absolute h-3 w-3 bg-indigo-600 rounded-full -top-[3px] border-2 border-white shadow-sm z-10 transition-all duration-300"
                style="left:0%"></div>
              <div id="bot-dot"
                class="absolute h-3 w-3 bg-gray-400 rounded-full -top-[3px] border-2 border-white shadow-sm z-10 transition-all duration-1000"
                style="left:0%"></div>
            </div>

            <div class="h-2 w-full bg-gray-200 rounded-full mb-6 overflow-hidden shadow-inner">
              <div id="progress"
                class="h-full bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 w-0 transition-all duration-300 rounded-full">
              </div>
            </div>

            <div class="mt-5">
              <div class="flex flex-col sm:flex-row gap-4 md:gap-6">
                <div class="flex-1">
                  <!-- Separate Metrics Card Above Arena -->
                  <div class="arena-metrics-bar">
                    <div class="arena-metric-item">
                      <span class="metric-label">Time</span>
                      <span id="fs-time-arena" class="metric-value">00:00</span>
                      <div class="metric-accent acc-time"></div>
                    </div>
                    <div class="arena-metric-item">
                      <span class="metric-label">Speed</span>
                      <span id="fs-wpm-arena" class="metric-value">0</span>
                      <div class="metric-accent acc-wpm"></div>
                    </div>
                    <div class="arena-metric-item">
                      <span class="metric-label">Precision</span>
                      <span id="fs-acc-arena" class="metric-value">100%</span>
                      <div class="metric-accent acc-acc"></div>
                    </div>
                    <div class="arena-metric-item">
                      <span class="metric-label">Characters Per Minute</span>
                      <span id="fs-cpm-arena" class="metric-value">0</span>
                      <div class="metric-accent acc-cpm"></div>
                    </div>
                  </div>

                  <div id="arena"
                    class="relative rounded-2xl border-2 border-gray-200 bg-white shadow-lg p-6 h-80 overflow-y-auto no-scrollbar transition-all duration-500">

                    <!-- Particles Container -->
                    <div id="particles-container" class="absolute inset-0 pointer-events-none overflow-hidden z-20">
                    </div>

                    <div id="pause-badge"
                      class="hidden absolute inset-0 bg-white/90 backdrop-blur-md flex items-center justify-center text-2xl font-bold text-gray-800 rounded-2xl">
                      <div class="text-center">
                        <div class="text-5xl mb-2">‚è∏Ô∏è</div>
                        <div>Paused ‚Äî Press Resume</div>
                      </div>
                    </div>
                    <!-- Floating Smooth Caret -->
                    <div id="smooth-caret"
                      class="absolute w-0.5 bg-indigo-600 shadow-[0_0_10px_rgba(99,102,241,0.8)] transition-all duration-75 pointer-events-none hidden">
                    </div>
                    <div id="text" class="prose prose-lg max-w-none"></div>
                  </div>

                  <div class="flex items-center gap-4 mt-4">
                    <button id="btn-pause" class="btn px-6 py-3 rounded-xl bg-emerald-500 text-white font-bold"
                      disabled>‚è∏
                      Pause</button>
                    <button id="btn-stop" class="btn px-6 py-3 rounded-xl bg-rose-500 text-white font-bold" disabled>‚èπ
                      Stop</button>
                    <button id="btn-restart"
                      class="btn px-6 py-3 rounded-xl border-2 border-gray-300 bg-white font-bold">‚Üª Restart</button>

                    <!-- Relocated Combo Counter -->
                    <div id="combo-container"
                      class="opacity-0 transition-all duration-300 flex flex-col items-center bg-white px-4 py-1.5 rounded-xl shadow-sm border border-indigo-100 transform translate-y-1">
                      <div id="combo-value" class="text-2xl font-black italic text-indigo-600 leading-tight">0</div>
                      <div class="text-[8px] font-bold uppercase tracking-widest text-indigo-400 leading-none">Streak
                      </div>
                    </div>

                    <div
                      class="ml-auto text-2xl font-mono font-bold text-gray-800 bg-white px-6 py-3 rounded-xl shadow-md"
                      id="clock">00:00</div>
                  </div>

                  <!-- Keyboard Tutor (Visible during Lessons) -->
                  <div id="keyboard-tutor" class="hidden animate-pop">
                    <!-- Rows will be injected by learn.js -->
                    <div class="keyboard-tutor mt-6 relative">
                      <div class="key-row" id="k-row-1"></div>
                      <div class="key-row" id="k-row-2"></div>
                      <div class="key-row" id="k-row-3"></div>
                      <div class="key-row" id="k-row-4"></div>
                      <div class="key-row" id="k-row-5"></div>

                      <!-- Realistic Image-Based Hands Overlay -->
                      <div id="hands-container" class="relative w-full h-full">
                        <img src="https://raw.githubusercontent.com/AnasKiani-Dev/AnasKiani-Dev/main/hands-outline.png"
                          class="w-full h-full object-contain opacity-20" alt="">
                        <!-- Fingertip Guidance Dot -->
                        <div id="fingertip-guidance" class="fingertip-dot"></div>
                      </div> <!-- Finger highlight overlays (positioned over each finger) -->
                      <div id="f-l-pinky" class="finger-highlight" style="top: 45%; left: 18%;"></div>
                      <div id="f-l-ring" class="finger-highlight" style="top: 40%; left: 26%;"></div>
                      <div id="f-l-middle" class="finger-highlight" style="top: 38%; left: 34%;"></div>
                      <div id="f-l-index" class="finger-highlight" style="top: 42%; left: 42%;"></div>
                      <div id="f-l-thumb" class="finger-highlight" style="top: 65%; left: 48%; width: 40px;"></div>
                      <div id="f-r-thumb" class="finger-highlight" style="top: 65%; right: 48%; width: 40px;"></div>
                      <div id="f-r-index" class="finger-highlight" style="top: 42%; right: 42%;"></div>
                      <div id="f-r-middle" class="finger-highlight" style="top: 38%; right: 34%;"></div>
                      <div id="f-r-ring" class="finger-highlight" style="top: 40%; right: 26%;"></div>
                      <div id="f-r-pinky" class="finger-highlight" style="top: 45%; right: 18%;"></div>
                    </div>

                  </div>
                  <div class="text-center mt-3">
                    <span
                      class="text-[10px] font-bold text-indigo-500 uppercase tracking-widest bg-indigo-50 px-3 py-1 rounded-full">Guided
                      Drill: Follow the Highlighted Key</span>
                  </div>
                </div>

                <aside class="w-full sm:w-56 md:w-64 flex-shrink-0">
                  <!-- Practice Native ad slot (NOW AT TOP) -->
                  <div
                    class="glass p-4 rounded-xl border border-white/40 sponsor-card group cursor-pointer hover:border-amber-200 transition-all mb-4">
                    <div class="flex items-center gap-3 mb-2">
                      <div class="w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center text-sm">‚å®Ô∏è</div>
                      <h4 class="text-[10px] font-bold text-gray-800">Premium Keycaps</h4>
                    </div>
                    <p class="text-[9px] text-gray-400 mb-2">by GearPro</p>
                    <button
                      class="w-full py-1.5 rounded-lg bg-gray-900 text-white text-[9px] font-bold shadow-lg group-hover:bg-indigo-600 transition-all">Shop
                      15% Off</button>
                    <div class="sponsor-shadow">‚ú®</div>
                  </div>
                </aside>
              </div>
            </div>

            <!-- Statistics Overview (Moved for Immediate Feedback) -->
            <div class="mt-8 glass p-8 rounded-3xl border border-white/40 shadow-sm relative overflow-hidden">
              <div class="flex items-center justify-between mb-6">
                <h3 class="text-2xl font-bold text-gray-800">üìä Performance Analytics</h3>
                <button onclick="TM_ENGINE.refreshDashboard()"
                  class="text-xs text-indigo-500 hover:text-indigo-700 font-bold">Refresh ‚Üª</button>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div>
                  <h4 class="text-sm font-bold text-gray-500 uppercase tracking-widest mb-4">Speed Consistency</h4>
                  <div class="h-64"><canvas id="detailedWpmChart"></canvas></div>
                </div>
                <div>
                  <h4 class="text-sm font-bold text-gray-500 uppercase tracking-widest mb-4">Long-term Progress</h4>
                  <div class="h-64"><canvas id="statsChart"></canvas></div>
                </div>
              </div>
              <!-- Heatmap -->
              <div class="mt-8 pt-8 border-t border-gray-100">
                <h4 class="text-sm font-bold text-gray-500 uppercase tracking-widest mb-4">Accuracy Heatmap</h4>
                <div id="heatmap-container" class="w-full flex justify-center py-4"></div>
              </div>
            </div>
          </div>

      </section>



      <!-- Certificate TAB -->
      <section id="tab-certificate" class="tab-panel hidden fade-in max-w-7xl mx-auto px-4">
        <div class="glass rounded-2xl shadow-xl border p-8">
          <h2 class="text-3xl font-bold mb-4 gradient-text">‚ú® Get Your Professional Certificate</h2>

          <!-- Certification Form (Shown when logged in) -->
          <div id="cert-form-container">
            <p class="text-gray-600 mb-6 text-lg">üìã <strong>Pass Requirements:</strong> Net WPM ‚â• 35 and Accuracy ‚â• 90%
            </p>
            <form id="cert-form" class="grid grid-cols-1 md:grid-cols-4 gap-4">
              <input id="full" class="border-2 border-gray-200 rounded-xl px-4 py-3" placeholder="Full Name" required />
              <input id="email" type="email" class="border-2 border-gray-200 rounded-xl px-4 py-3"
                placeholder="Email Address" required />
              <select id="cert-duration" class="border-2 border-gray-200 rounded-xl px-4 py-3">
                <option value="300">5 minutes (Recommended)</option>
                <option value="600">10 minutes (Advanced)</option>
              </select>
              <button id="start-cert" type="button"
                class="btn px-6 py-3 rounded-xl bg-gradient-to-r from-amber-400 to-yellow-500 text-gray-900 font-bold shadow-lg">Start
                Test üéì</button>
            </form>
          </div>

          <!-- Login Required Message (Shown when guest) -->
          <div id="cert-login-required" class="hidden flex flex-col items-center justify-center py-12 text-center">
            <div
              class="w-20 h-20 bg-amber-50 rounded-full flex items-center justify-center mb-6 border border-amber-100">
              <span class="text-4xl">üîê</span>
            </div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">Verified Identity Required</h3>
            <p class="text-gray-600 mb-8 max-w-md">To ensure the integrity of your certificate, you must be logged in
              with a verified Google account before starting the assessment.</p>
            <button onclick="TM_AUTH.login()"
              class="btn px-10 py-4 rounded-2xl bg-gray-900 text-white font-bold shadow-xl hover:bg-black transition-all">
              Login with Google to Continue
            </button>
          </div>

          <button id="view-cert-demo"
            class="btn px-6 py-3 mt-6 rounded-xl bg-gray-800 text-white font-bold shadow-lg">üîç
            Preview Certificate
            (Demo)</button>
        </div>
      </section>

      <!-- STATS TAB -->
      <section id="tab-stats" class="tab-panel hidden fade-in max-w-7xl mx-auto px-4">
        <div class="glass rounded-2xl shadow-xl border p-8">
          <div class="flex items-center justify-between mb-8">
            <h2 class="text-3xl font-bold gradient-text">üìä Advanced Analytics</h2>
            <div class="flex gap-2">
              <button
                class="px-4 py-2 bg-white border border-gray-200 rounded-xl text-xs font-bold text-gray-500 hover:bg-gray-50 transition-all">Last
                7 Days</button>
              <button class="px-4 py-2 bg-indigo-600 rounded-xl text-xs font-bold text-white shadow-md">Last 30
                Days</button>
              <button
                class="px-4 py-2 bg-white border border-gray-200 rounded-xl text-xs font-bold text-gray-500 hover:bg-gray-50 transition-all">All
                Time</button>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="bg-indigo-50/50 p-6 rounded-2xl border border-indigo-100">
              <p class="text-xs font-bold text-indigo-500 uppercase tracking-widest mb-1 text-center">Avg. Speed</p>
              <p class="text-3xl font-black text-indigo-700 text-center"><span id="stats-avg-wpm">0</span> <small
                  class="text-sm">WPM</small></p>
            </div>
            <div class="bg-emerald-50/50 p-6 rounded-2xl border border-emerald-100">
              <p class="text-xs font-bold text-emerald-500 uppercase tracking-widest mb-1 text-center">Peak Speed</p>
              <p class="text-3xl font-black text-emerald-700 text-center"><span id="stats-peak-wpm">0</span> <small
                  class="text-sm">WPM</small></p>
            </div>
            <div class="bg-amber-50/50 p-6 rounded-2xl border border-amber-100">
              <p class="text-xs font-bold text-amber-500 uppercase tracking-widest mb-1 text-center">Avg. Accuracy</p>
              <p class="text-3xl font-black text-amber-700 text-center"><span id="stats-avg-acc">0</span><small
                  class="text-sm">%</small></p>
            </div>
            <div class="bg-purple-50/50 p-6 rounded-2xl border border-purple-100">
              <p class="text-xs font-bold text-purple-500 uppercase tracking-widest mb-1 text-center">Total Time</p>
              <p class="text-3xl font-black text-purple-700 text-center"><span id="stats-total-time">0</span> <small
                  class="text-sm">Hrs</small></p>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
            <div class="bg-white rounded-2xl border border-gray-100 p-6 shadow-sm">
              <h3 class="text-sm font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span class="w-2 h-4 bg-indigo-500 rounded-full"></span>
                WPM Progress Over Time
              </h3>
              <div class="h-64">
                <canvas id="longTermWpmChart"></canvas>
              </div>
            </div>
            <div class="bg-white rounded-2xl border border-gray-100 p-6 shadow-sm">
              <h3 class="text-sm font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span class="w-2 h-4 bg-emerald-500 rounded-full"></span>
                Accuracy Stability
              </h3>
              <div class="h-64">
                <canvas id="longTermAccChart"></canvas>
              </div>
            </div>
          </div>

          <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 bg-white rounded-2xl border border-gray-100 p-6 shadow-sm">
              <h3 class="text-sm font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span class="w-2 h-4 bg-amber-500 rounded-full"></span>
                Finger Speed Analysis (WPM by Finger)
              </h3>
              <div id="finger-analysis-container" class="space-y-4">
                <!-- Data will be injected -->
                <div class="text-center py-10 text-gray-400 italic">Analysis data pending...</div>
              </div>
            </div>
            <div class="bg-white rounded-2xl border border-gray-100 p-6 shadow-sm">
              <h3 class="text-sm font-bold text-gray-800 mb-6 flex items-center gap-2">
                <span class="w-2 h-4 bg-rose-500 rounded-full"></span>
                Problem Key Heatmap
              </h3>
              <div id="stats-heatmap" class="w-full flex justify-center py-4"></div>
              <div class="mt-4 p-4 bg-rose-50 rounded-xl border border-rose-100">
                <p class="text-xs text-rose-800 font-medium">Your most difficult keys are <span
                    class="font-bold underline" id="top-3-weak-keys">none</span>. Try focused practice on these
                  characters.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- SETTINGS TAB -->
      <section id="tab-settings" class="tab-panel hidden fade-in max-w-7xl mx-auto px-4">
        <div class="glass rounded-2xl shadow-xl border p-8">
          <h2 class="text-3xl font-bold mb-8 gradient-text">‚öôÔ∏è Settings & Customization</h2>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
            <!-- Left Column: Experience -->
            <div class="space-y-8">
              <div>
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-3">
                  <span class="p-2 bg-indigo-100 text-indigo-600 rounded-lg">üí¨</span>
                  Typing Experience
                </h3>
                <div class="space-y-4">
                  <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100">
                    <div>
                      <p class="font-bold text-gray-800 text-sm">Keyboard Layout</p>
                      <p class="text-xs text-gray-500">Choose your preferred layout for guide</p>
                    </div>
                    <select id="setting-layout"
                      class="bg-white border-2 border-gray-200 rounded-lg px-3 py-2 text-sm font-bold">
                      <option value="qwerty">QWERTY</option>
                      <option value="dvorak">Dvorak</option>
                      <option value="colemak">Colemak</option>
                    </select>
                  </div>

                  <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100">
                    <div>
                      <p class="font-bold text-gray-800 text-sm">Sound Effects</p>
                      <p class="text-xs text-gray-500">Toggle typing and achievement sounds</p>
                    </div>
                    <div class="flex items-center gap-4">
                      <select id="setting-sound-profile"
                        class="bg-white border-2 border-gray-200 rounded-lg px-3 py-2 text-sm font-bold">
                        <option value="off">Muted</option>
                        <option value="linear">Linear</option>
                        <option value="clicky">Clicky</option>
                      </select>
                      <input type="range" id="setting-volume"
                        class="w-24 h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer" min="0" max="100"
                        value="50">
                    </div>
                  </div>

                  <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100">
                    <div>
                      <p class="font-bold text-gray-800 text-sm">Finger Guidance</p>
                      <p class="text-xs text-gray-500">Show suggested finger on the keyboard</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                      <input type="checkbox" id="setting-fingers" class="sr-only peer" checked>
                      <div
                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600">
                      </div>
                    </label>
                  </div>
                </div>
              </div>

              <div>
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-3">
                  <span class="p-2 bg-emerald-100 text-emerald-600 rounded-lg">‚ú®</span>
                  Account & Sync
                </h3>
                <div class="p-4 bg-gray-50 rounded-xl border border-gray-100 flex items-center justify-between">
                  <div>
                    <p class="font-bold text-gray-800 text-sm" id="setting-account-status">Not Synced</p>
                    <p class="text-xs text-gray-500">Sync your progress across devices</p>
                  </div>
                  <button
                    class="px-4 py-2 bg-gray-900 text-white rounded-lg text-xs font-bold hover:bg-black transition-all">Sign
                    In</button>
                </div>
              </div>
            </div>

            <!-- Right Column: Visuals -->
            <div class="space-y-8">
              <div>
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-3">
                  <span class="p-2 bg-purple-100 text-purple-600 rounded-lg">üé®</span>
                  Visual Appearance
                </h3>
                <div class="grid grid-cols-2 gap-4">
                  <button
                    class="theme-card p-4 rounded-2xl border-2 border-indigo-500 bg-white text-left relative overflow-hidden group shadow-lg"
                    data-theme-id="tactical">
                    <div class="text-xs font-black mb-1 opacity-60">DEFAULT</div>
                    <div class="font-bold text-indigo-900">Tactical Blue</div>
                    <div class="mt-2 flex gap-1">
                      <div class="w-3 h-3 rounded-full bg-slate-900"></div>
                      <div class="w-3 h-3 rounded-full bg-indigo-500"></div>
                      <div class="w-3 h-3 rounded-full bg-slate-800"></div>
                    </div>
                    <div
                      class="absolute -right-2 -bottom-2 opacity-5 scale-150 rotate-12 group-hover:rotate-0 transition-transform">
                      üéØ</div>
                  </button>

                  <button
                    class="theme-card p-4 rounded-2xl border-2 border-transparent bg-slate-50 text-left hover:border-gray-300 transition-all opacity-70"
                    data-theme-id="light">
                    <div class="text-xs font-black mb-1 opacity-60">CLASSIC</div>
                    <div class="font-bold text-slate-900">Modern Light</div>
                    <div class="mt-2 flex gap-1">
                      <div class="w-3 h-3 rounded-full bg-white border"></div>
                      <div class="w-3 h-3 rounded-full bg-indigo-100 border"></div>
                      <div class="w-3 h-3 rounded-full bg-slate-50 border"></div>
                    </div>
                  </button>

                  <button
                    class="theme-card p-4 rounded-2xl border-2 border-transparent bg-gray-900 text-left hover:border-indigo-400 transition-all opacity-70"
                    data-theme-id="night">
                    <div class="text-xs font-black mb-1 opacity-40">OLED</div>
                    <div class="font-bold text-gray-100">Pure Night</div>
                    <div class="mt-2 flex gap-1">
                      <div class="w-3 h-3 rounded-full bg-black"></div>
                      <div class="w-3 h-3 rounded-full bg-gray-800"></div>
                      <div class="w-3 h-3 rounded-full bg-indigo-600"></div>
                    </div>
                  </button>

                  <button
                    class="theme-card p-4 rounded-2xl border-2 border-transparent bg-pink-50 text-left hover:border-pink-300 transition-all opacity-70"
                    data-theme-id="vapor">
                    <div class="text-xs font-black mb-1 opacity-60">RETRO</div>
                    <div class="font-bold text-pink-900">Vaporwave</div>
                    <div class="mt-2 flex gap-1">
                      <div class="w-3 h-3 rounded-full bg-pink-500"></div>
                      <div class="w-3 h-3 rounded-full bg-purple-500"></div>
                      <div class="w-3 h-3 rounded-full bg-cyan-400"></div>
                    </div>
                  </button>
                </div>
              </div>

              <div>
                <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-3">
                  <span class="p-2 bg-amber-100 text-amber-600 rounded-lg">üëÅÔ∏è</span>
                  Accessibility
                </h3>
                <div class="space-y-4">
                  <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100">
                    <p class="font-bold text-gray-800 text-sm">Large Text Arena</p>
                    <label class="relative inline-flex items-center cursor-pointer">
                      <input type="checkbox" id="setting-large-text" class="sr-only peer">
                      <div
                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600">
                      </div>
                    </label>
                  </div>
                  <div class="flex items-center justify-between p-4 bg-gray-50 rounded-xl border border-gray-100">
                    <p class="font-bold text-gray-800 text-sm">High Contrast Mode</p>
                    <label class="relative inline-flex items-center cursor-pointer">
                      <input type="checkbox" id="setting-high-contrast" class="sr-only peer">
                      <div
                        class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600">
                      </div>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-12 pt-8 border-t border-gray-100 flex justify-end gap-4">
            <button id="btn-reset-settings"
              class="px-6 py-3 rounded-xl border-2 border-gray-200 font-bold text-gray-500 hover:bg-gray-50 transition-all">Reset
              to Defaults</button>
            <button id="btn-save-settings"
              class="px-8 py-3 rounded-xl bg-gray-900 text-white font-bold shadow-lg hover:bg-black transition-all">Apply
              Changes</button>
          </div>
        </div>
      </section>

      <!-- MODERN LEARNING ARENA -->
      <section id="tab-learn-arena" class="tab-panel hidden font-sans">

        <!-- Arena Container -->
        <div class="arena-container">

          <!-- Title Bar -->
          <header class="arena-header">
            <div class="flex items-center gap-4">
              <div class="arena-status-dot"></div>
              <span class="text-sm font-semibold text-slate-200 tracking-wide" id="arena-session-title">
                Modern Arena - [ Home Row: F & J ]
              </span>
            </div>
            <div class="flex items-center gap-6">
              <div class="flex items-center gap-2 text-xs font-medium text-slate-400">
                <span class="w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_8px_#3b82f6]"></span>
                LIVE SESSION
              </div>
              <div class="h-4 w-px bg-slate-700"></div>
              <button onclick="TM_LEARN.abortSession()"
                class="w-8 h-8 rounded-lg hover:bg-slate-800 flex items-center justify-center transition-colors text-slate-400">
                √ó
              </button>
            </div>
          </header>

          <!-- Main Grid Layout -->
          <div class="arena-grid">

            <!-- Left Column: Lesson Info Panel -->
            <aside class="lesson-panel">
              <div class="lesson-header">
                <div class="lesson-icon">üìö</div>
                <h2 id="lesson-title" class="lesson-title">Lesson Title</h2>
              </div>

              <div class="lesson-content">
                <div class="lesson-section">
                  <h3 class="lesson-section-title">Goal</h3>
                  <p id="lesson-goal" class="lesson-text">Practice typing with proper finger placement</p>
                </div>

                <div class="lesson-section">
                  <h3 class="lesson-section-title">Instructions</h3>
                  <ul class="lesson-list">
                    <li>Keep your fingers on home row</li>
                    <li>Look at the screen, not keyboard</li>
                    <li>Maintain steady rhythm</li>
                  </ul>
                </div>

                <!-- Monetization Banner Placeholder -->
                <div class="monetization-banner">
                  <div class="banner-content">
                    <div class="banner-icon">üéØ</div>
                    <div class="banner-text">
                      <div class="banner-title">Premium Features</div>
                      <div class="banner-subtitle">Unlock advanced lessons</div>
                    </div>
                    <button class="banner-cta">Upgrade</button>
                  </div>
                </div>
              </div>
            </aside>

            <!-- Center Column: Typing Area -->
            <main class="typing-area">

              <!-- Text Display Zone -->
              <div class="text-display-zone">
                <div id="carbon-arena" class="carbon-arena" role="application" aria-label="Typing practice arena"
                  aria-live="polite">

                  <!-- Screen Reader Announcements -->
                  <div id="sr-announcements" class="sr-only" aria-live="assertive" aria-atomic="true"></div>

                  <!-- Text Target -->
                  <div id="carbon-text-target" class="carbon-text-target" aria-label="Text to type"></div>

                  <!-- Caret -->
                  <div id="carbon-caret" class="carbon-caret" aria-hidden="true"></div>
                </div>

                <!-- Hidden Input -->
                <input id="carbon-input" type="text" class="absolute opacity-0 pointer-events-none" spellcheck="false"
                  autocomplete="off" aria-label="Type the displayed text here" />
              </div>

              <!-- Keyboard Zone -->
              <div class="keyboard-zone">
                <div class="keyboard-container">
                  <div id="vk-container" class="virtual-kb modern-kb">
                    <!-- Virtual keyboard injected by learn.js -->
                  </div>
                </div>
              </div>

            </main>

            <!-- Right Column: Metrics Panel -->
            <aside class="metrics-panel">

              <!-- Progress Section -->
              <div class="progress-section">
                <div class="section-header">
                  <div class="section-icon">üìä</div>
                  <h3 class="section-title">Performance</h3>
                </div>

                <div id="retro-progress-chart" class="progress-chart">
                  <!-- Injected bars -->
                </div>

                <div class="progress-info">
                  <span id="progress-text" class="progress-text">0 / 0 chars</span>
                  <span id="eta-text" class="eta-text">ETA: --:--</span>
                </div>
              </div>

              <!-- Metrics Cards -->
              <div class="metrics-cards">

                <!-- Time Card -->
                <div class="metric-card">
                  <div class="metric-header">
                    <span class="metric-icon time-icon">‚è±Ô∏è</span>
                    <label class="metric-label">Time</label>
                    <button id="retro-pause-btn" onclick="TM_LEARN.togglePause()" class="pause-btn">
                      Pause
                    </button>
                  </div>
                  <div id="training-time-pro" class="metric-value">00:00</div>
                </div>

                <!-- WPM Card -->
                <div class="metric-card">
                  <div class="metric-header">
                    <span class="metric-icon wpm-icon">‚ö°</span>
                    <label class="metric-label">WPM</label>
                  </div>
                  <div id="training-wpm-pro" class="metric-value">0</div>
                </div>

                <!-- Accuracy Card -->
                <div class="metric-card">
                  <div class="metric-header">
                    <span class="metric-icon accuracy-icon">üéØ</span>
                    <label class="metric-label">Accuracy</label>
                  </div>
                  <div class="metric-value-wrapper">
                    <span id="training-acc-pro" class="metric-value">100</span>
                    <span class="metric-unit">%</span>
                  </div>
                </div>

                <!-- Errors Card -->
                <div class="metric-card">
                  <div class="metric-header">
                    <span class="metric-icon error-icon">‚ùå</span>
                    <label class="metric-label">Errors</label>
                  </div>
                  <div id="training-errors" class="metric-value">0</div>
                </div>

              </div>

              <!-- Abort Button -->
              <button onclick="TM_LEARN.abortSession()" class="abort-btn">
                Abort Session
              </button>

            </aside>

          </div>
        </div>

      </section>

      </section>
    </main>

    <!-- ========== LOGIN / USER MODAL ========== -->
    <div id="user-modal" class="modal hidden">
      <div class="bg-white rounded-3xl p-8 shadow-2xl w-full max-w-md border animate-pop">
        <h2 class="text-2xl font-bold mb-4 gradient-text text-center">üëã Welcome to Typing Master</h2>
        <p class="text-gray-500 text-center mb-6 text-sm italic">"Practice makes perfect."</p>
        <div class="flex flex-col gap-4">
          <input id="modal-username" type="text" placeholder="Your Name"
            class="w-full bg-gray-50 border-2 border-gray-100 rounded-xl px-4 py-3 focus:border-indigo-500 focus:outline-none transition-all"
            required>
          <button id="modal-save"
            class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold py-4 rounded-xl shadow-lg hover:opacity-90 transition">Start
            Typing</button>
        </div>
      </div>
    </div>

    <!-- ========== PAYMENT MODAL ========== -->
    <div id="pay-modal" class="modal hidden">
      <div class="bg-white rounded-3xl p-8 shadow-2xl w-full max-w-lg border relative overflow-hidden animate-pop">
        <div class="text-center">
          <div
            class="w-20 h-20 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-6 border border-emerald-100">
            <span class="text-4xl">üèÜ</span>
          </div>
          <h2 class="text-3xl font-bold text-gray-800 mb-2">Test Passed!</h2>
          <p class="text-gray-600 mb-8">Claim your professional certificate and secure your cloud verification record
            for only <strong>$5.00</strong>.</p>

          <div class="bg-gray-50 rounded-2xl p-6 mb-8 border border-dashed border-gray-300">
            <ul class="text-left text-sm text-gray-600 space-y-3">
              <li class="flex items-center gap-3">‚úÖ <strong>Verifiable ID:</strong> Recruiters can check your
                authenticity.</li>
              <li class="flex items-center gap-3">‚úÖ <strong>Cloud Storage:</strong> Permanent record in our database.
              </li>
              <li class="flex items-center gap-3">‚úÖ <strong>Premium Seal:</strong> Official Gold/Expert merit badge.
              </li>
              <li class="flex items-center gap-3">‚úÖ <strong>PDF Export:</strong> High-resolution print-ready
                certificate.</li>
            </ul>
          </div>

          <!-- Coupon Section -->
          <div class="mb-6">
            <div class="flex gap-2">
              <input id="coupon-code" type="text" placeholder="Promo code (e.g. FREE100)"
                class="flex-1 border-2 border-gray-100 rounded-xl px-4 py-3 text-sm focus:border-indigo-500 focus:outline-none transition-all uppercase">
              <button id="apply-coupon"
                class="bg-indigo-600 text-white px-6 py-3 rounded-xl font-bold text-sm hover:bg-indigo-700 transition">Apply</button>
            </div>
            <div id="coupon-msg" class="text-[10px] mt-2 font-bold uppercase hidden"></div>
          </div>

          <!-- Safepay Button Container -->
          <div id="safepay-button-container" class="w-full min-h-[50px] flex justify-center"></div>

          <button id="pay-cancel" class="mt-4 text-gray-400 hover:text-gray-600 text-sm font-medium transition">
            Maybe later (Skip for now)
          </button>
        </div>
      </div>
    </div>

    <!-- ========== TEST RESULT MODAL ========== -->
    <div id="result-modal" class="modal hidden">
      <div class="bg-white rounded-3xl p-8 shadow-22xl w-full max-w-lg border relative overflow-hidden">
        <!-- Decoration side gradient -->
        <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-full blur-3xl -mr-16 -mt-16"></div>

        <div class="relative z-10 text-center">
          <div id="result-avatar" class="text-5xl mb-4">üôÇ</div>
          <h2 class="text-3xl font-bold text-gray-800 mb-1" id="result-name">Guest</h2>
          <p id="result-duration" class="text-xs text-gray-500 font-semibold uppercase tracking-widest mb-6">1 minute
            test</p>

          <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-8">
            <div class="bg-indigo-50 rounded-2xl p-4 border border-indigo-100 shadow-sm">
              <div id="res-wpm" class="text-3xl font-black text-indigo-600">0</div>
              <div class="text-[10px] text-gray-500 font-bold uppercase tracking-wide mt-1">WPM</div>
            </div>
            <div class="bg-emerald-50 rounded-2xl p-4 border border-emerald-100 shadow-sm">
              <div id="res-acc" class="text-3xl font-black text-emerald-600">100%</div>
              <div class="text-[10px] text-gray-500 font-bold uppercase tracking-wide mt-1">Accuracy</div>
            </div>
            <div class="bg-purple-50 rounded-2xl p-4 border border-purple-100 shadow-sm">
              <div id="res-cpm" class="text-3xl font-black text-purple-600">0</div>
              <div class="text-[10px] text-gray-500 font-bold uppercase tracking-wide mt-1">CPM</div>
            </div>
            <div class="bg-rose-50 rounded-2xl p-4 border border-rose-100 shadow-sm">
              <div id="res-unc" class="text-3xl font-black text-rose-600">0</div>
              <div class="text-[10px] text-gray-500 font-bold uppercase tracking-wide mt-1">Errors</div>
            </div>
          </div>

          <!-- Extra metrics for certificate failure branch (optional) -->
          <div class="hidden grid grid-cols-2 gap-4 mb-8" id="failed-req-stats">
            <div class="text-xs text-gray-500">Gross: <span id="res-gross">0</span></div>
            <div class="text-xs text-gray-500">Net: <span id="res-net">0</span></div>
          </div>

          <div class="py-4 px-6 bg-gray-50 rounded-2xl border border-gray-100 mb-8">
            <div id="result-medal" class="text-xl font-bold text-gray-700 italic">ü•â Bronze Achiever</div>
            <p class="text-[10px] text-gray-400 mt-1 uppercase tracking-widest">Performance Reward</p>
          </div>

          <div class="flex gap-4">
            <button id="result-close"
              class="flex-1 px-8 py-4 rounded-xl border-2 border-gray-200 font-bold text-gray-600 hover:bg-gray-50 transition">Close</button>
            <button id="take-another"
              class="flex-1 px-8 py-4 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold shadow-lg hover:opacity-90 transition">‚Üª
              New Test</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ========== PREMIUM CERTIFICATE MODAL (NO QR) ========== -->
    <div id="cert-modal" class="modal hidden">
      <div class="bg-white rounded-3xl shadow-2xl flex flex-col"
        style="max-width:92vw; max-height:92vh; padding:20px; overflow:hidden;">
        <div id="certPreviewContainer"
          class="flex-1 flex items-center justify-center overflow-hidden bg-gray-50 rounded-2xl p-6">
          <div id="certCanvas" class="cert-container"
            style="width:1122px; height:794px; background:#ffffff; box-sizing:border-box; padding:60px 70px; transform: scale(var(--certScale, 1)); transform-origin: top left; border-radius:14px;">
            <!-- Background / corners / borders handled by CSS -->
            <div style="text-align:center; margin-bottom:18px;">
              <div style="font-size:14px; color:#b08b00; letter-spacing:3px; font-weight:600; margin-bottom:10px;">
                CERTIFICATE OF ACHIEVEMENT</div>
              <div
                style="display:inline-block; padding:14px 40px; background:#fbbf24; border-radius:6px; font-size:28px; font-weight:700; color:#1e293b;">
                Typing Proficiency Certificate</div>
            </div>

            <div style="text-align:center; font-size:14px; color:#64748b; margin-bottom:20px;">This is to certify that
            </div>

            <div id="cert-name"
              style="text-align:center; font-size:42px; font-weight:800; color:#0f172a; margin-bottom:18px;">‚Äî</div>

            <div
              style="text-align:center; font-size:16px; color:#475569; line-height:28px; max-width:800px; margin:auto;">
              has successfully demonstrated outstanding typing proficiency with a net score of
              <b id="cert-wpm">0</b> WPM and <b id="cert-acc">0</b>% accuracy
              in a <b id="cert-dur">0</b>-minute professional assessment.
            </div>

            <div class="cert-id-badge" aria-hidden="true">
              <span class="cert-id-label">Certificate ID:</span>
              <span class="cert-id-value" id="cert-id-meta">‚Äî</span>
            </div>

            <div class="cert-divider-elegant"><span class="cert-divider-diamond" aria-hidden="true"></span></div>

            <div class="cert-footer">
              <div class="cert-footer-left">
                <p class="cert-footer-label">Issued by</p>
                <p class="cert-footer-org" style="font-weight:700; color:#2C3E50;">Typing Master by Rehman</p>
                <p class="cert-footer-standard">Standard: 5-keystroke model</p>
              </div>

              <div class="cert-signature-block"
                style="display:flex; flex-direction:column; align-items:center; gap:6px;">
                <div class="cert-signature" style="font-family:'Great Vibes', cursive; font-size:34px; color:#2C3E50;">
                  Rehman Ahmad</div>
                <div class="cert-signature-title" style="font-size:11px; color:#5D6D7E; font-weight:600;">System
                  Administrator</div>

                <!-- Achievement Seal -->
                <div id="cert-seal" class="cert-signature-seal"
                  style="position:relative; width: 64px; height: 64px; border-radius:50%; background:linear-gradient(135deg,#FFD700,#FFA500); display:flex; align-items:center; justify-content:center; box-shadow:0 6px 15px rgba(0,0,0,0.2); border:3px solid white; transform:rotate(-12deg); margin-top: 10px;">
                  <span id="seal-text"
                    style="font-size:9px; font-weight:900; color:white; letter-spacing:0.08em; text-transform: uppercase;">Verified</span>
                </div>
              </div>

              <div class="cert-footer-right" style="text-align:right;">
                <p class="cert-footer-verify">Verify this credential at:</p>
                <!-- QR Code Container -->
                <div id="cert-qr"
                  style="display: inline-block; padding: 10px; background: white; border-radius: 8px; margin-bottom: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border: 1px solid #f1f5f9;">
                  <img id="qr-img" src="" alt="Scan to Verify" style="width: 70px; height: 70px; display: block;" />
                </div>
                <p id="cert-id-footer" class="cert-footer-id"
                  style="font-family: monospace; font-size: 13px; color: #64748b; font-weight: bold;">‚Äî</p>
              </div>
            </div>

            <div class="cert-watermark"
              style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) rotate(-45deg); font-family:'Playfair Display', serif; font-size:120px; color:rgba(218,165,32,0.03); pointer-events:none; user-select:none;">
              CERTIFIED</div>
          </div>
        </div>

        <div class="flex items-center justify-center gap-3 mt-6 shrink-0">
          <button id="download-cert-pdf"
            class="btn px-8 py-4 rounded-xl bg-gradient-to-r from-amber-400 to-yellow-500 text-gray-900 font-bold shadow-lg text-lg">üì•
            Download PDF</button>
          <button id="cert-copy-record"
            class="btn px-6 py-3 rounded-xl border-2 border-gray-300 bg-white font-bold text-lg">üìã Copy verification
            record</button>
          <button id="cert-close" class="btn px-6 py-4 rounded-xl border-2 border-gray-300 bg-white font-bold text-lg">‚úï
            Close</button>
        </div>
      </div>
    </div>

    <!-- OFF-SCREEN RENDER FOR PDF -->
    <div id="certRealRender" style="position: fixed; top: -20000px; left: -20000px;">
      <div id="certCanvasClone"></div>
    </div>

    <!-- --- TypingMaster Professional Widgets --- -->

    <!-- Real-time Typing Meter -->
    <div id="typing-meter" class="typing-meter-container hidden">
      <div class="meter-dial"></div>
      <div id="meter-needle" class="meter-needle"></div>
      <div id="meter-wpm" class="meter-label">0</div>
      <div class="meter-sub">WPM METER</div>
    </div>

    <!-- Detailed Course Report Modal -->
    <!-- Detailed Course Report Modal -->
    <div id="report-modal" class="modal-overlay hidden">
      <div class="glass max-w-2xl w-full p-8 rounded-3xl shadow-2xl relative animate-pop overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-2 bg-indigo-600"></div>

        <div class="flex justify-between items-start mb-6">
          <div>
            <h2 class="text-3xl font-black text-gray-800 tracking-tight">Performance Summary</h2>

            <!-- Summary Native Ad Banner -->
            <div
              class="glass p-3 rounded-2xl border border-amber-200 bg-amber-50/10 mb-6 flex items-center justify-between sponsor-card group cursor-pointer hover:bg-amber-50/20 transition-all">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-amber-100 flex items-center justify-center text-xl">üéì</div>
                <div>
                  <h4 class="text-sm font-bold text-gray-800 leading-tight">University Accredited Typing Cert</h4>
                  <p class="text-[10px] text-gray-500">Official recognition for your skills. Start now.</p>
                </div>
              </div>
              <span
                class="text-indigo-600 text-[10px] font-bold px-3 py-1.5 rounded-lg bg-white border border-gray-100 group-hover:bg-indigo-50 transition-all shrink-0">Claim
                25% Discount ‚Üí</span>
            </div>
            <p id="report-lesson-name" class="text-indigo-600 font-bold uppercase tracking-widest text-xs mt-1">Course
              Report</p>
          </div>
          <button id="report-close" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
            <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
          <div class="report-stat-card bg-gray-50/50 p-4 rounded-2xl border border-gray-100">
            <p class="text-[10px] font-black uppercase text-gray-400 mb-1">Gross Speed</p>
            <p class="text-2xl font-black text-gray-800"><span id="report-gross-wpm">0</span> <small
                class="text-xs font-bold text-gray-400">WPM</small></p>
          </div>
          <div class="report-stat-card bg-gray-50/50 p-4 rounded-2xl border border-gray-100">
            <p class="text-[10px] font-black uppercase text-gray-400 mb-1">Accuracy</p>
            <p class="text-2xl font-black text-emerald-600"><span id="report-accuracy">0</span><small
                class="text-xs font-bold">%</small></p>
          </div>
          <div class="report-stat-card bg-gray-50/50 p-4 rounded-2xl border border-gray-100">
            <p class="text-[10px] font-black uppercase text-gray-400 mb-1">Net Speed</p>
            <p class="text-2xl font-black text-indigo-600"><span id="report-net-wpm">0</span> <small
                class="text-xs font-bold text-gray-400">WPM</small></p>
          </div>
          <div class="report-stat-card bg-gray-50/50 p-4 rounded-2xl border border-gray-100">
            <p class="text-[10px] font-black uppercase text-gray-400 mb-1">Consistency</p>
            <p class="text-2xl font-black text-purple-600"><span id="report-consistency">0</span><small
                class="text-xs font-bold">%</small></p>
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div class="bg-white rounded-2xl border border-gray-100 p-4 shadow-sm">
            <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3">Speed Flow</h3>
            <div class="h-32"><canvas id="reportSparkline"></canvas></div>
          </div>
          <div class="bg-indigo-50/50 rounded-2xl border border-indigo-100 p-4 flex flex-col justify-center">
            <p class="text-xs font-bold text-indigo-500 uppercase tracking-widest mb-1">Personal Recommendation</p>
            <p id="report-recommendation" class="text-sm text-indigo-900 font-medium leading-relaxed">Analyzing your
              performance patterns...</p>
          </div>
        </div>

        <div class="mb-6">
          <h3 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-3 flex items-center gap-2">
            <span class="w-1.5 h-4 bg-rose-500 rounded-full"></span>
            Character Analysis (Problem Keys)
          </h3>
          <div id="report-problem-keys"
            class="flex flex-wrap gap-2 min-h-[40px] items-center text-gray-400 italic text-sm">
            Analysis in progress...
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-3">
          <button id="report-ok"
            class="flex-1 py-4 bg-gray-900 text-white font-bold rounded-2xl shadow-xl hover:shadow-2xl hover:-translate-y-0.5 transition active:translate-y-0">
            Continue Training
          </button>
          <button id="report-retry"
            class="px-6 py-4 bg-white border-2 border-gray-200 text-gray-700 font-bold rounded-2xl hover:bg-gray-50 transition">
            ‚Üª Retry Now
          </button>
        </div>
      </div>
    </div>

    <!-- Hidden Sound Effect -->

    <audio id="sound-click" preload="auto">
      <!-- Short mechanical click sound (Base64) -->
      <source
        src="data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YVtvT19dqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqampqamp"
        type="audio/wav">
    </audio>

  </div> <!-- end #app -->

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://storage.googleapis.com/safepayobjects/api/safepay-checkout.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="auth.js"></script> <!-- MODULAR JS (SaaS Architecture) -->
  <script src="firestore.js"></script>
  <script src="sound_manager.js"></script>
  <script src="exam.js"></script>
  <script src="hand_animator.js"></script>
  <script src="course_data.js"></script> <!-- Course Data -->
  <script src="achievements.js"></script> <!-- Achievements Module -->
  <script src="virtual_keyboard.js"></script> <!-- Virtual Keyboard -->
  <script src="course.js"></script> <!-- Course Module -->

  <script src="practice.js"></script>
</body>

</html>